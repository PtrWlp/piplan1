<div class="piplan__story">

  <button class="piplan__story__touched"
       *ngIf="story.needsJiraUpdate"
       (click)="resetTouchedFlag(story)"></button>

  <div class="piplan__story__key">
    <piplan-editablefield
      class="piplan__story__number"
      [fieldValue]="story.jiraNumberDisplay"
      [linkPrefix]="'https://jira.devnet.klm.com/browse/'"
      (valueChanged)="updateStoryNumber(story, $event)"
      (inEditMode)="story.editing = $event"></piplan-editablefield>

    <div class="piplan__story__points">
      <div class="piplan__story__points__display piplan__points">
        {{getDisplayPoints(story.points)}}
      </div>
      <button data-html2canvas-ignore="true" class="piplan__miniButton" (click)="estimateUp(story)">+</button>
      <button data-html2canvas-ignore="true" class="piplan__miniButton" (click)="estimateDown(story)">-</button>
      <button *ngIf="story.sprint === 'backlog'" data-html2canvas-ignore="true" class="piplan__miniButton" (click)="throwToTrashcan(story)">x</button>
      <button *ngIf="sprintsWithNext.indexOf(story.sprint) !== -1" data-html2canvas-ignore="true" class="piplan__miniButton" (click)="nextSprint(story)">&#x261e;</button>
      <button *ngIf="story.sprint === 'trashcan'" data-html2canvas-ignore="true" class="piplan__miniButton" (click)="deleteStory(story)">x</button>

    </div>
  </div>
  <piplan-editablefield
    class="piplan__story__description"
    [fieldValue]="story.description"
    (valueChanged)="updateStoryDescr(story, $event)"
    (inEditMode)="story.editing = $event"></piplan-editablefield>

</div>
